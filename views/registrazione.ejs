<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <!-- Impostazione viewport per il responsive -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- logo nella scheda del browser -->
        <link rel="icon" href="/img/logo3.png" type="image/png" />
    <title>Registrazione</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Stili personalizzati: sfondo, ombra della card e margine per le sezioni
     stile per lo sfondo delle pagine e font-->
    <link rel="stylesheet" href="/css/Stile.css" />
    <link rel="stylesheet" href="/css/Stile-registrazione.css" />
  </head>
  <body>
    <%- include('navbar') %>
    <div class="container mt-5 riempimento">
      <!-- Card che racchiude l'intero form -->
      <div class="card">
        <!-- Header della card con sfondo blu e testo bianco -->
        <div class="card-header bg-primary text-white">
          <h2>Inserisci i tuoi dati</h2>
        </div>
        <div class="card-body">
          <!-- nel body della card troviamo tutto il form di registrazione 
           e  invio di dati al server tramite endpoint in modo post -->
          <form
            id="formRegistrazione"
            action="/api/registrazione"
            method="POST"
          >
            <!-- sezione dei dati anagrafici -->
            <div class="form-sezione">
              <h4 class="mb-3">Dati anagrafici</h4>
              <!-- definiamo la riga del form dentro la card nome e cognome -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nome" class="form-label">Nome</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nome"
                    name="nome"
                    placeholder="Inserisci il nome"
                    required
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="cognome" class="form-label">Cognome</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cognome"
                    name="cognome"
                    placeholder="Inserisci il cognome"
                    required
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="sesso" class="form-label">Sesso</label>
                  <select class="form-select" id="sesso" name="sesso" required>
                    <option value="">Seleziona...</option>
                    <option value="M">M</option>
                    <option value="F">F</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="codiceFiscale" class="form-label"
                    >Codice Fiscale</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="codiceFiscale"
                    name="codiceFiscale"
                    placeholder="Inserisci il codice fiscale"
                    required
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="dataNascita" class="form-label"
                    >Data di Nascita</label
                  >
                  <input
                    type="date"
                    class="form-control"
                    id="dataNascita"
                    name="dataNascita"
                    required
                  />
                  <!-- messaggio di errore per l'età se minorenne 
                   stile invalid-feedback per avere testo rosso e bordi input rossi
                     viene mostrato se la condizione non viene rispettata-->
                  <div
                    class="invalid-feedback"
                    id="MessaggioErroreEta"
                    style="display: none"
                  >
                    Devi avere almeno 18 anni per sottoscrivere un
                    contocorrente.
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="luogoNascita" class="form-label">
                    Comune di Nascita o Nazione se nato all'estero
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="luogoNascita"
                    name="luogoNascita"
                    placeholder="Inserisci il luogo di nascita"
                    required
                  />
                </div>
              </div>
            </div>
            <!-- Sezione: Indirizzo di residenza  separato in campi che poi verrano unificati -->
            <div class="form-sezione">
              <h4 class="mb-3">Indirizzo di residenza</h4>
              <div class="row">
                <div class="col-md-8 mb-3">
                  <label for="via" class="form-label">Via</label>
                  <input
                    type="text"
                    class="form-control"
                    id="via"
                    name="via"
                    placeholder="Inserisci la via"
                  />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="civico" class="form-label">Civico</label>
                  <input
                    type="text"
                    class="form-control"
                    id="civico"
                    name="civico"
                    placeholder="Inserisci il numero civico"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-4 mb-3">
                  <label for="citta" class="form-label">Città</label>
                  <input
                    type="text"
                    class="form-control"
                    id="citta"
                    name="citta"
                    placeholder="Inserisci la città"
                  />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="cap" class="form-label">CAP</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cap"
                    name="cap"
                    placeholder="Inserisci il CAP"
                  />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="provincia" class="form-label">Provincia</label>
                  <input
                    type="text"
                    class="form-control"
                    id="provincia"
                    name="provincia"
                    placeholder="Inserisci la provincia"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nazione" class="form-label">Nazione</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nazione"
                    name="nazione"
                    placeholder="Inserisci la nazione"
                  />
                </div>
              </div>
              <!-- l'unificazione avviene in inviodati2 nel codice js  -->
              <input type="hidden" id="indirizzo" name="indirizzo" />
            </div>
            <!-- altri dati come mail password e professione-->
            <div class="form-sezione">
              <h4 class="mb-3">Altri dati</h4>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="professione" class="form-label"
                    >Professione</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="professione"
                    name="professione"
                    placeholder="Inserisci la professione"
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="email" class="form-label">Email</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    name="email"
                    placeholder="Inserisci la email"
                    required
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    name="password"
                    placeholder="Inserisci la password"
                    required
                  />
                  <div
                    class="invalid-feedback"
                    id="MessaggioErrorePassword"
                    style="display: none"
                  >
                    La password deve avere almeno 6 caratteri, includere una
                    lettera maiuscola, un numero e un carattere speciale.
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="confermaPassword" class="form-label"
                    >Conferma Password</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    id="confermaPassword"
                    name="confermaPassword"
                    placeholder="Conferma la password"
                    required
                  />
                  <div
                    class="invalid-feedback"
                    id="MessaggioErroreConfermaPassword"
                    style="display: none"
                  >
                    Le password non corrispondono.
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex mb-3">
              <p>
                Leggi attentamente i
                <a href="/api/termini-condizioni" target="_blank"
                  >Termini e Condizioni</a
                >
                prima di procedere.
              </p>
            </div>
            <!-- innesca i contorlli e l'invio del form se tutto va a buon fine -->
            <div class="d-flex mb-3">
              <button type="submit" class="btn btn-primary btn-lg">
                invia i dati e crea il tuo conto corrente
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- Footer info base a piè pagina -->
    <%- include('footer') %>
    <script src="/invioDati2.js"></script>
    <!-- Bootstrap  -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
